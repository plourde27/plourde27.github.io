<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>3D</title>
    <style>
      body {margin: 0; }
      canvas {display: block; }
      #top {
        text-align: center;
        font-family: 'Avenir';
        margin-top: 5px;
        margin-bottom: 5px;
      }
      #minimap {
        position: absolute;
        top: 33px;
        left: 0px;
      }
    </style>
    <script src="3Dimg.js" type="module">
    </script>
    <script src="three.js"></script>
    <script src="jquery-3.5.1.min.js"></script>
  </head>
  <body>
    <!--<canvas id="topbar" display="block" margin="0 auto"></canvas>!-->
    <div id="top"></div>
    <canvas id="selimg"></canvas>
    <div id="three"></div>
    <canvas id="game" display="block" margin="0 auto"></canvas>
	   <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>
    <div id="extra" hidden=true></div>
    <div id="extra2" hidden=true>0 0</div>
    <div id="pos" hidden=true></div>
    <canvas id="minimap" width=0 height=0></canvas>
    <img id="1" src="pixels/m1i.png">
    <img id="2" src="pixels/m2i.png">
    <img id="3" src="pixels/m3i.png">
    <img id="4" src="pixels/m4i.png">
    <img id="5" src="pixels/m5i.png">
    <img id="6" src="pixels/m6i.png">
    <img id="7" src="pixels/m7i.png">
    <img id="8" src="pixels/m8i.png">
    <img id="9" src="pixels/m9i.png">
    <img id="10" src="pixels/m10i.png">
    <img id="11" src="pixels/m11i.png">
    <img id="12" src="pixels/m12i.png">
    <img id="13" src="pixels/m13i.png">
    <img id="14" src="pixels/m14i.png">
    <img id="15" src="pixels/m15i.png">
    <img id="16" src="pixels/m16i.png">
    <img id="17" src="pixels/m17i.png">
    <img id="18" src="pixels/m18i.png">
    <img id="19" src="pixels/m19i.png">
    <img id="20" src="pixels/m20i.png">
    <img id="21" src="pixels/m21i.png">
    <img id="22" src="pixels/m22i.png">
    <img id="23" src="pixels/m23i.png">
    <img id="24" src="pixels/m24i.png">
    <img id="25" src="pixels/m25i.png">
    <img id="26" src="pixels/m26i.png">
    <img id="27" src="pixels/m27i.png">
    <img id="28" src="pixels/m28i.png">
    <img id="29" src="pixels/m29i.png">
    <img id="30" src="pixels/m30i.png">
    <img id="31" src="pixels/m31i.png">
    <img id="32" src="pixels/m32i.png">
    <img id="33" src="pixels/m33i.png">
    <img id="34" src="pixels/m34i.png">
    <img id="35" src="pixels/m35i.png">
    <img id="36" src="pixels/m36i.png">
    <img id="37" src="pixels/m37i.png">
    <img id="38" src="pixels/m38i.png">
    <img id="39" src="pixels/m39i.png">
    <img id="40" src="pixels/m40i.png">
    <img id="41" src="pixels/m41i.png">
    <img id="42" src="pixels/m42i.png">
    <img id="43" src="pixels/m43i.png">
    <img id="44" src="pixels/m44i.png">
    <img id="45" src="pixels/m45i.png">
    <img id="46" src="pixels/m46i.png">
    <img id="47" src="pixels/m47i.png">
    <img id="48" src="pixels/m48i.png">
    <img id="49" src="pixels/m49i.png">
    <img id="50" src="pixels/m50i.png">
    <img id="51" src="pixels/m51i.png">
    <img id="52" src="pixels/m52i.png">
    <img id="53" src="pixels/m53i.png">
    <img id="54" src="pixels/m54i.png">
    <img id="55" src="pixels/m55i.png">
    <img id="56" src="pixels/m56i.png">
    <img id="57" src="pixels/m57i.png">
    <img id="58" src="pixels/m58i.png">
    <img id="59" src="pixels/m59i.png">
    <img id="60" src="pixels/m60i.png">
    <img id="61" src="pixels/m61i.png">
    <img id="62" src="pixels/m62i.png">
    <img id="63" src="pixels/m63i.png">
    <img id="64" src="pixels/m64i.png">
    <img id="65" src="pixels/m65i.png">
    <img id="66" src="pixels/m66i.png">
    <img id="67" src="pixels/m67i.png">
    <img id="68" src="pixels/m68i.png">
    <img id="69" src="pixels/m69i.png">
    <img id="70" src="pixels/m70i.png">
    <img id="71" src="pixels/m71i.png">
    <img id="72" src="pixels/m72i.png">
    <img id="73" src="pixels/m73i.png">
    <img id="74" src="pixels/m74i.png">
    <img id="75" src="pixels/m75i.png">
    <img id="76" src="pixels/m76i.png">
    <img id="77" src="pixels/m77i.png">
    <img id="78" src="pixels/m78i.png">
    <img id="79" src="pixels/m79i.png">
    <img id="80" src="pixels/m80i.png">
    <img id="81" src="pixels/m81i.png">
    <img id="82" src="pixels/m82i.png">
    <img id="83" src="pixels/m83i.png">
    <img id="84" src="pixels/m84i.png">
    <img id="85" src="pixels/m85i.png">
    <img id="86" src="pixels/m86i.png">
    <img id="87" src="pixels/m87i.png">
    <img id="88" src="pixels/m88i.png">
    <img id="89" src="pixels/m89i.png">
    <img id="90" src="pixels/m90i.png">
    <img id="91" src="pixels/m91i.png">
    <img id="92" src="pixels/m92i.png">
    <img id="93" src="pixels/m93i.png">
    <img id="94" src="pixels/m94i.png">
    <img id="95" src="pixels/m95i.png">

    <div id="num" hidden=true>


    <script>

    //document.getElementById("7").hidden = true;
    //g.fillStyle = '#ff0000';
    //g.fillRect(0, 0, 200, 200);

    var imgs = [];
    for (img of document.getElementsByTagName('img')) {
      imgs[img.id] = img;
    }

    var programCode = function(processingInstance) {
      with (processingInstance) {
        size(window.innerWidth, 270 + 50 * 100 + 50);
        frameRate(60);
        angleMode = "degrees";
        {
            background(255, 255, 255);
            var clicked = false;
            var mouseClicked = function() {
              clicked = true;
          };

          var scene = "Menu";

            /*var targs = ["BRISTOL MOUNTAIN", "GORE MOUNTAIN", "SONG MOUNTAIN", "TOGGENBURG", "GREEK PEAK", "KILLINGTON", "ELK MOUNTAIN", "LABRADOR MOUNTAIN", "HOLIDAY VALLEY", "BIG SKY", "OKEMO", "SNOW RIDGE", "WHITEFACE MOUNTAIN", "SUGARLOAF", "REVELSTOKE", "WOODS VALLEY", "SMUGGLERS NOTCH", "HEAVENLY", "SWAIN", "HUNTER MOUNTAIN"];
            var stats = [
              ["BRISTOL MOUNTAIN", "Canandaigua, NY", 1200, 34, 6, 0],
              ["GORE MOUNTAIN", "North Creek, NY", 2537, 110, 14, 1],
              ["SONG MOUNTAIN", "Tully, NY", 700, 24, 5, 2],
              ["TOGGENBURG", "Fabius, NY", 700, 22, 5, 3],
              ["GREEK PEAK", "Virgil, NY", 952, 55, 8, 4],
              ["KILLINGTON", "Killington, VT", 3050, 155, 22, 5],
              ["ELK MOUNTAIN", "Union Dale, PA", 1000, 27, 7, 6],
              ["LABRADOR MOUNTAIN", "Truxton, NY", 700, 24, 3, 7],
              ["HOLIDAY VALLEY", "Ellicottville, NY", 750, 60, 13, 8],
              ["BIG SKY", "Bozeman, MT", 4350, 317, 36, 9],
              ["OKEMO", "Ludlow, VT", 2200, 121, 20, 10],
              ["SNOW RIDGE", "Turin, NY", 650, 24, 6, 11],
              ["WHITEFACE MOUNTAIN", "Wilmington, NY", 3430, 89, 12, 12],
              ["SUGARLOAF", "Carabassett Valley, ME", 2820, 162, 13, 13],
              ["REVELSTOKE", "Revelstoke, BC", 5620, 59, 6, 14],
              ["WOODS VALLEY", "Westernville, NY", 500, 21, 6, 15],
              ["SMUGGLERS NOTCH", "Cambridge, VT", 2610, 78, 8, 16],
              ["HEAVENLY", "Heavenly, CA", 3500, 97, 28, 17],
              ["SWAIN", "Swain, NY", 650, 35, 5, 18],
              ["HUNTER MOUNTAIN", "Hunter, NY", 1600, 67, 13, 19]
            ];*/

            var stats = [
              ["AFTON ALPS", "Hastings, MN", 350, 48, 21, 0, 570, 706, 844, 357],
              ["ALTA", "Alta, UT", 2538, 119, 6, 1, 1367, 2046, 972, 1328],
              ["ALYESKA", "Anchorage, AK", 2500, 76, 7, 2, 1766, 1528, 1370, 911],
              ["ANGEL FIRE", "Angel Fire, NM", 2077, 81, 7, 3, 2218, 1358, 917, 517],
              ["ANTHONY LAKES", "Rock Creek, OR", 900, 21, 3, 4, 1184, 870, 1217, 334],
              ["ARAPAHOE BASIN", "Dillon, CO", 2530, 147, 9, 5, 452, 1630, 713, 1153],
              ["ARIZONA SNOWBOWL", "Flagstaff, AZ", 2300, 55, 8, 6, 1076, 1897, 1069, 588],
              ["ASPEN SNOWMASS", "Aspen, CO", 4406, 336, 40, 7, 1289, 1915, 2060, 1205, 4],
              ["ATTITASH", "Bartlett, NH", 1750, 68, 9, 8, 1994, 1356, 1939, 296, 2],
              ["BEAR CREEK", "Longswamp, PA", 510, 23, 6, 9, 796, 725, 500, 206, 1],
              ["BEAR VALLEY", "Bear Valley, CA", 1900, 56, 10, 10, 1793, 1277, 1603, 843, 2],
              ["BEAVER CREEK", "Eagle-Vail, CO", 3340, 150, 24, 11, 1348, 1516, 885, 857, 4],
              ["BEAVER MOUNTAIN", "Garden, UT", 1600, 48, 6, 12, 1789, 1283, 1953, 489, 1],
              ["BELLEAYRE", "Highmount, NY", 1404, 50, 8, 13, 1071, 1172, 972, 310, 2],
              ["BERKSHIRE EAST", "Charlemont, MA", 1180, 38, 5, 14, 745, 961, 778, 304, 1],
              ["BIG BOULDER", "Lake Harmony, PA", 600, 8, 8, 15, 814, 856, 650, 322, 1],
              ["BIG SKY", "Bozeman, MT", 4350, 317, 36, 16, 2393, 1762, 2009, 1120, 4],
              ["BLACKTAIL MOUNTAIN", "Lakeside, MT", 1440, 27, 4, 17, 779, 1342, 482, 402, 2],
              ["BLUE HILLS", "Milton, MA", 309, 16, 4, 18, 682, 616, 883, 238, 1],
              ["BLUE KNOB", "Claysburg, PA", 1072, 34, 6, 19, 684, 1382, 1430, 462, 1],
              ["BLUE MOUNTAIN", "Danielsville, PA", 1082, 40, 16, 20, 918, 1125, 887, 238, 1],
              ["BLUEWOOD", "Dayton, WA", 1125, 26, 3, 21, 953, 1200, 833, 277, 1],
              ["BOGUS BASIN", "Horseshoe Bend, ID", 1800, 82, 10, 22, 1721, 678, 1462, 228, 2],
              ["BOLTON VALLEY", "Bolton, VT", 1704, 71, 6, 23, 1990, 1161, 1548, 735, 2],
              ["BOREAL", "Truckee, CA", 500, 34, 8, 24, 875, 1036, 724, 360, 1],
              ["BRECKENRIDGE", "Breckenridge, CO", 3398, 187, 34, 25, 1230, 2188, 819, 1682, 4],
              ["BRETTON WOODS", "Carroll, NH", 1500, 63, 10, 26, 1382, 1570, 1462, 519, 2],
              ["BRIAN HEAD", "Brian Head, UT", 1548, 71, 8, 27, 1335, 965, 545, 569, 2],
              ["BRIDGER BOWL", "Bridger, MT", 2600, 105, 11, 28, 1196, 1388, 1112, 937, 4],
              ["BRIGHTON", "Park City, UT", 1745, 66, 7, 29, 1453, 1497, 285, 1008, 2],
              ["BRISTOL MOUNTAIN", "Canandaigua, NY", 1200, 34, 6, 30, 1345, 1295, 1410, 420, 1],
              ["BROMLEY", "Peru, VT", 1334, 47, 9, 31, 872, 1401, 1450, 421, 1],
              ["BRUNDAGE", "McCall, ID", 1800, 67, 6, 32, 1352, 1439, 1260, 517, 2],
              ["BUCK HILL", "Burnsville, MN", 309, 16, 10, 33, 554, 604, 516, 260, 1],
              ["BUENA VISTA", "Puposky, MN", 230, 17, 6, 34, 642, 621, 437, 481, 1],
              ["BURKE MOUNTAIN", "Burke, VT", 2011, 52, 5, 35, 1348, 1307, 1122, 250, 1],
              ["CAMDEN SNOW BOWL", "Camden, ME", 850, 20, 3, 36, 1369, 1003, 935, 302, 1],
              ["CAMELBACK", "Tannersville, PA", 800, 39, 16, 37, 1050, 869, 1141, 287, 1],
              ["CANAAN VALLEY", "Davis, WV", 850, 47, 4, 38, 960, 772, 773, 181, 1],
              ["CANNON MOUNTAIN", "Franconia, NH", 2180, 97, 11, 39, 1442, 1377, 641, 657, 2],
              ["CASCADE MOUNTAIN", "Caledonia, WI", 460, 47, 11, 40, 947, 754, 793, 226, 1],
              ["CATAMOUNT", "Hillsdale, NY", 1000, 38, 8, 41, 1126, 1094, 1231, 367, 1],
              ["COFFEE MILL", "Wabasha, MN", 425, 14, 3, 42, 872, 746, 511, 339, 1],
              ["COOPER", "Leadville North, CO", 1200, 59, 5, 43, 1472, 2448, 2174, 1823, 2],
              ["COPPER MOUNTAIN", "Copper Mountain, CO", 2738, 150, 24, 44, 1392, 2047, 1397, 1362, 4],
              ["CRANMORE MOUNTAIN", "Conway, NH", 1200, 57, 8, 45, 692, 1256, 1064, 410, 2],
              ["CRESTED BUTTE", "Crested Butte, CO", 3062, 121, 14, 46, 2789, 1472, 1694, 717, 2],
              ["CROTCHED MOUNTAIN", "Francestown, NH", 1016, 23, 5, 47, 789, 925, 803, 175, 1],
              ["CRYSTAL MOUNTAIN", "White River, WA", 3100, 86, 11, 48, 1603, 1397, 1548, 492, 2],
              ["DEER MOUNTAIN", "Terry, SD", 940, 63, 4, 49, 420, 1039, 908, 358, 1],
              ["DEER VALLEY", "Park City, UT", 3000, 103, 21, 50, 1248, 1571, 1493, 890, 2],
              ["DEVILS HEAD", "Greenfield, WI", 500, 23, 9, 51, 953, 774, 948, 498, 1],
              ["DIAMOND PEAK", "Incline Village, NV", 1840, 30, 7, 52, 1406, 1280, 750, 520, 1],
              ["DISCOVERY", "Granite, MT", 2380, 74, 8, 53, 2124, 1659, 2644, 1332, 2],
              ["DODGE RIDGE", "Pinecrest, CA", 1600, 67, 12, 54, 1679, 728, 870, 277,  2],
              ["DONNER SKI RANCH", "Truckee, CA", 750, 52, 8, 55, 417, 691, 847, 679, 1],
              ["EAGLE ROCK", "Weston, PA", 550, 14, 3, 56, 845, 933, 611, 285, 1],
              ["ECHO MOUNTAIN", "Idaho Springs, CO", 600, 9, 3, 57, 969, 904, 781, 284, 1],
              ["ELDORA", "Eldora, CO", 1400, 65, 10, 58, 632, 1161, 1169, 521, 2],
              ["ELK MOUNTAIN", "Union Dale, PA", 1000, 27, 7, 1272, 1149, 970, 514, 1],
              ["GIANTS RIDGE", "Biwabik, MN", 500, 35, 7, 60, 853, 758, 702, 244, 1],
              ["GORE MOUNTAIN", "North Creek, NY", 2537, 110, 14, 61, 1171, 1699, 905, 752, 2],
              ["GRAND TARGHEE", "Alta, WY", 2270, 97, 5, 62, 1121, 1608, 1571, 890, 2],
              ["GRANITE PEAK", "Wausau, WI", 700, 58, 5, 63, 800, 1117, 1053, 443, 1],
              ["GREAT DIVIDE", "Marysville, MT", 1580, 110, 6, 64, 1473, 1565, 1670, 1470, 2],
              ["GREEK PEAK", "Virgil, NY", 952, 55, 8, 65, 1370, 1053, 1560, 540, 1],
              ["GUNSTOCK", "Gilford, NH", 1400, 48, 7, 66, 1493, 1377, 1154, 236, 2],
              ["HEAVENLY", "Heavenly, CA", 3500, 97, 28, 67, 2626, 1555, 2507, 1165, 4],
              ["HOGADON BASIN", "Casper Mountain, WY", 640, 28, 2, 68, 947, 1053, 690, 376, 1],
              ["HOLIDAY VALLEY", "Ellicottville, NY", 750, 60, 13, 69, 742, 748, 1492, 551, 1],
              ["HOLIMONT", "Ellicottville, NY", 700, 55, 8, 70, 1084, 944, 1271, 398, 1],
              ["HOMEWOOD", "Homewood, CA", 1650, 67, 8, 71, 1500, 1520, 986, 1074, 2],
              ["HOODOO", "Santiam Junction, OR", 1035, 36, 6, 72, 969, 1388, 808, 744, 2],
              ["HOWELSEN HILL", "Steamboat Springs, CO", 440, 17, 4, 73, 903, 1462, 888, 1193, 1],
              ["HUNTER MOUNTAIN", "Hunter, NY", 1600, 67, 13, 74, 543, 1026, 1360, 470, 2],
              ["HYLAND HILLS", "Bloomington, MN", 175, 11, 7, 75, 510, 415, 481, 270, 1],
              ["JACK FROST", "Blakeslee, PA", 600, 18, 9, 76, 931, 991, 925, 401, 1],
              ["JACKSON HOLE", "Teton Village, WY", 4139, 133, 13, 77, 2336, 1769, 1281, 424, 2],
              ["JAY PEAK", "Jay, VT", 2153, 81, 9, 78, 1104, 1653, 1092, 378, 2],
              ["JIMINY PEAK", "Lanesborough, MA", 1150, 45, 9, 79, 1123, 1158, 987, 373, 2],
              ["JUNE MOUNTAIN", "June Lake, CA", 2590, 43, 7, 80, 818, 1691, 521, 289, 2],
              ["KELLY CANYON", "Heise, ID", 1000, 51, 6, 81, 1100, 1202, 1050, 344, 2],
              ["KEYSTONE", "Keystone, CO", 3128, 128, 20, 82, 663, 2083, 1244, 1972, 4],
              ["KILLINGTON", "Killington, VT", 3050, 155, 22, 83, 2026, 1272, 1727, 919, 2],
              ["KIRKWOOD", "Kit Carson, CA", 2000, 85, 12, 84, 1794, 1289, 1967, 719, 2],
              ["KISSING BRIDGE", "Glenwood, NY", 550, 39, 10, 85, 915, 889, 889, 385, 1],
              ["LABRADOR MOUNTAIN", "Truxton, NY", 700, 23, 4, 86, 999, 1052, 643, 500, 1],
              ["LEE CANYON", "Charleston, NV", 860, 27, 3, 87, 755, 1195, 1255, 849, 2],
              ["LIBERTY", "Carroll Valley, PA", 620, 21, 7, 88, 1463, 874, 972, 886, 1],
              ["LITTLE SWITZERLAND", "Slinger, WI", 200, 18, 8, 89, 864, 620, 643, 377, 1],
              ["LOOKOUT PASS", "Larson, ID", 1150, 38, 4, 90, 457, 1365, 800, 1072, 2],
              ["LOON MOUNTAIN", "Lincoln, NH", 2100, 61, 10, 91, 1670, 1574, 1481, 702, 2],
              ["LOST TRAIL", "Sula, MT", 1800, 69, 8, 92, 968, 1068, 848, 689, 2],
              ["LOST VALLEY", "Auburn, ME", 240, 31, 4, 93, 637, 662, 509, 452, 1],
              ["LOVELAND", "Keystone, CO", 2210, 94, 10, 94, 1654, 1097, 1631, 749, 2]
            ];
            var targs = [];
            for (var i = 0 ; i < stats.length ; i++) {
              targs.push(stats[i]);
            }

             draw = function() {
               if (scene == "Menu") {
                 cursor(ARROW);
                 background(255, 255, 255);
                 fill(150, 150, 0);
                 rectMode(CENTER);
                 textAlign(CENTER, CENTER);
                 textFont(createFont("Avenir"));
                 textSize(80);
                 text("Ultimate Ski Race 3D", width/2, 60);
                 fill(0, 0, 0);
                 textSize(24);
                 text("Made by Plourde27", width/2,170);
                 text("August 3 Pre-release Version", width/2, 130);
                 noStroke();
                 fill(100, 100, 100, 40);
                 rect(width*0.25, 220, 100, 40, 5);
                 rect(width*0.5, 220, 100, 40, 5);
                 rect(width*0.65, 220, 100, 40, 5);
                 rect(width*0.75, 220, 100, 40, 5);
                 rect(width*0.85, 220, 100, 40, 5);
                 fill(0, 0, 0);
                 textSize(16);
                 textFont(createFont("Avenir"));
                 textAlign(CENTER, CENTER);
                 text("Name", width*0.25, 220);
                 text("Location", width*0.5, 220);
                 text("Vertical Drop", width*0.65, 220);
                 text("Trails", width*0.75, 220);
                 text("Lifts", width*0.85, 220);

                 if (mouseX >= width*0.65-50 && mouseX <= width*0.65+50 && mouseY >= 200 && mouseY <= 240) {
                   cursor(HAND);
                   if (clicked) {
                     stats.sort(function(a, b) { return b[2] - a[2] });
                   }
                 }
                 if (mouseX >= width*0.75-50 && mouseX <= width*0.75+50 && mouseY >= 200 && mouseY <= 240) {
                   cursor(HAND);
                   if (clicked) {
                     stats.sort(function(a, b) { return b[3] - a[3] });
                   }
                 }
                 if (mouseX >= width*0.85-50 && mouseX <= width*0.85+50 && mouseY >= 200 && mouseY <= 240) {
                   cursor(HAND);
                   if (clicked) {
                     stats.sort(function(a, b) { return b[4] - a[4] });
                   }
                 }

                 for (var i = 0  ; i < targs.length ; i++) {
                   fill(0, 0, 200, 40);
                   noStroke();
                   if (mouseX >= width*0.1 && mouseX <= width*0.9 && mouseY >= 249 +i*50 && mouseY <= 291 + i*50) {
                     cursor(HAND);
                     rect(width/2, 270 + i*50, width*0.8 + 10, 47, 5);
                     if (clicked) {
                       //document.getElementById("game").sel = stats[i][6];
                       scene = "Loading";
                     }
                   }
                   else {
                     rect(width/2, 270 + i*50, width*0.8, 42, 5);
                   }
                   fill(0, 0, 0);
                   textSize(22);
                   textFont(createFont("AvenirNext-Bold"));
                   textAlign(LEFT, CENTER);
                   text(stats[i][0], width*0.1 + 12, 270 + i*50);
                   stroke(100, 100, 100, 200);
                   strokeWeight(1);
                   textAlign(CENTER, CENTER);
                   textFont(createFont("Avenir"));
                   text(stats[i][1], width*0.5, 270 + i*50);
                   text(stats[i][2], width*0.65, 270 + i*50);
                   text(stats[i][3], width*0.75, 270 + i*50);
                   text(stats[i][4], width*0.85, 270 + i*50);

                   line(width*0.4, 249 + i*50, width*0.4, 291 + i*50);
                   line(width*0.6, 249 + i*50, width*0.6, 291 + i*50);
                   line(width*0.7, 249 + i*50, width*0.7, 291 + i*50);
                   line(width*0.8, 249 + i*50, width*0.8, 291 + i*50);
                   //line(width*0.825, 249 + i*50, width*0.825, 291 + i*50);

                 }
               }
               else if (scene == "Loading") {
                 background(255, 255, 255);
                 fill(0, 0, 0);
                 textFont(createFont("Avenir"));
                 textSize(100);
                 text("Loading Mountain...", width/2, height/2);
               }
               clicked = false;


             };


         }
       }
     };

    var canvas = document.getElementById("game");
    var processingInstance = new Processing(canvas, programCode);



    var programCode2 = function(processingInstance) {
      with (processingInstance) {
        size(window.innerWidth, 50);
        frameRate(60);
        angleMode = "degrees";
        {
          background(255, 255, 255);
          /*rectMode(CENTER);

          fill(100, 100, 100, 40);
          noStroke();
          rect(width*0.5, height/2, 120, 40, 5);
          fill(0, 0, 0);
          textSize(19);

          textFont(createFont("Avenir"));
          textAlign(CENTER, CENTER);
          text("Menu", width*0.5, height/2);*/
        }
      }

    };

    var programCode3 = function(processingInstance) {
      with (processingInstance) {
        size(window.innerWidth, 50);
        frameRate(60);
        angleMode = "degrees";
        {
          background(255, 255, 255);
        }
      }

    };

    var mouseY = 0;
    var mouseX = 0;
    var nr = 0;
    var orot = 0;

     var tick = 0;
     var loaded = false;
     var x = -1000;

     var drawn = false;

       document.getElementById("selimg").width = 0;
       document.getElementById("selimg").height = 0;

     function animate2() {

       x++;

       var px = parseInt(document.getElementById("pos").innerHTML.split(" ")[0]);
       var py = parseInt(document.getElementById("pos").innerHTML.split(" ")[1]);

       //px = document.getElementById("7").width - 100;
       //py = document.getElementById("7").height - 100;


       mx = 100 - px;
       my = 100 - py;
       //mx = 0;
      // my = 0;

      var dd = imgs[parseInt(document.getElementById("num").innerHTML)];

      for (img of document.getElementsByTagName('img')) {
        img.hidden = true;
      }
      //document.getElementById("66").hidden = false;

       if (loaded) {
         var g = document.getElementById("minimap").getContext('2d');

         var IW = 200;
         document.getElementById("minimap").width = IW;
         document.getElementById("minimap").height = IW;

         g.clearRect(0, 0, IW, IW);
         //g.fillStyle = '#ff0000';

         g.fillStyle = 'rgb(0, 48, 144, 0.8)';



         //g.fillRect(IW/2-10, IW/2-10, 4, 4);
         //g.arc(100, 100, 10, 0, 2*Math.PI, false);
         //g.fill();

         g.translate(IW/2, IW/2);
         nr = parseFloat(document.getElementById("pos").innerHTML.split(" ")[2]);
         //console.log("Angle: ");
         //console.log(nr);
         //console.log(nr-orot);

         g.rotate(nr);
        //g.rotate(Math.PI/4);
         orot = nr;

         g.translate(-IW/2, -IW/2);

         g.drawImage(dd, mx, my, dd.width, dd.height);

         g.translate(IW/2, IW/2);

         g.rotate(-nr);
        //g.rotate(Math.PI/4);

         g.translate(-IW/2, -IW/2);

         g.beginPath();
         g.moveTo(IW/2-8, IW/2+11);
         g.lineTo(IW/2, IW/2-11);
         g.lineTo(IW/2+8, IW/2+11);
         //g.lineTo(IW-5, IW+5);
         g.fill();


         /*g.width = 0;
         g.height = 0;

         g.width = 800;
         g.height = 800;*/

         //g.fillRect(0, 0, 200, 200);

       }
       window.requestAnimationFrame(animate2);
       if (document.getElementById("extra").innerHTML == "Loaded Lifts") {
         document.getElementById("extra").innerHTML = "";
         //document.getElementById("game").width = 0;
         //document.getElementById("game").height = 0;
         loaded = true;
       }
       else if (document.getElementById("extra").innerHTML == "Going Back") {
         document.getElementById("extra").innerHTML = "";
         document.getElementById("game").width = window.innerWidth;
         document.getElementById("game").height = window.innerHeight;
       }

       tick++;
       /*if (loaded) {
         var canvas2 = document.getElementById("topbar");
         var processingInstance2 = new Processing(canvas2, programCode2);
       }
       else {
         var canvas2 = document.getElementById("topbar");
         var processingInstance2 = new Processing(canvas2, programCode3);
       }*/
    }

    animate2();

    /*var elem = document.getElementById("three");
    var left = elem.offsetLeft + elem.clientLeft;
    var etop = elem.offsetTop + elem.clientTop;


    elem.addEventListener('mousemove', function(event) {
      var x = event.pageX - left;
      var y = event.pageY - etop;
      document.getElementById("extra2").innerHTML = y;
    });

    const elem = document.getElementById("three");

    function lockPointer(elem) {
      if (elem.requestPointerLock) {
        elem.requestPointerLock();
      } else if (elem.webkitRequestPointerLock) {
        elem.webkitRequestPointerLock();
      } else if (elem.mozRequestPointerLock) {
        elem.mozRequestPointerLock();
      } else {
        console.warn("Pointer locking not supported");
      }
    }

    elem.addEventListener("mousedown", e => {
      const {
        movementX,
        movementY
      } = e;

      mouseX += movementX;
      mouseY += movementY;

    });

    elem.addEventListener("mousedown", e => {
      lockPointer(elem);
    });*/

    const elem = document.getElementById("three");

    function lockPointer(elem) {
      if (elem.requestPointerLock) {
        elem.requestPointerLock();
      } else if (elem.webkitRequestPointerLock) {
        elem.webkitRequestPointerLock();
      } else if (elem.mozRequestPointerLock) {
        elem.mozRequestPointerLock();
      } else {
        console.warn("Pointer locking not supported");
      }
    }

    elem.addEventListener("mousemove", e => {
      const {
        movementX,
        movementY
      } = e;

      mouseX += movementX;
      mouseY += movementY;

      document.getElementById("extra2").innerHTML = mouseX + " " + mouseY;
    });

    elem.addEventListener("mousedown", e => {
      lockPointer(elem);
    });

    </script>
  </body>
